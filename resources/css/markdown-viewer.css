@import 'tailwindcss';
@import 'highlight.js/styles/atom-one-light.css';

@utility markdown-view {
    color: var(--color-design-system-paragraph);

    /* Headings */
    & h1,
    & h2 {
        color: var(--color-design-system-title);
        @apply mb-8 text-2xl font-bold;
    }

    & h3 {
        color: var(--color-design-system-paragraph);
        @apply mb-6 text-xl font-bold;
    }

    & h4 {
        color: var(--color-design-system-paragraph);
        @apply mb-3 text-lg font-bold;
    }

    & h1:not(:first-child),
    & h2:not(:first-child) {
        @apply mt-8;
    }

    & h3:not(:first-child),
    & h4:not(:first-child) {
        @apply mt-6;
    }

    /* Links */
    & a {
        color: var(--color-design-system-primary);
        @apply underline;
    }

    /* Paragraphs */
    & p:not(:last-child) {
        @apply mb-4;
    }

    /* Lists */
    & ul {
        @apply mb-4 list-disc list-outside pt-2 pl-8;
    }

    & ul li {
        @apply mb-2;
    }

    & ol {
        @apply mb-4 list-decimal list-outside pt-2 pl-8;
    }

    & ol li {
        @apply mb-2;
    }

    /* Blockquotes */
    & blockquote {
        @apply border-l-4 border-gray-300 pl-4 my-4 italic text-gray-600;
    }

    /* Tables */
    & table {
        @apply w-full my-4 border-collapse;
    }

    & th,
    & td {
        @apply border border-gray-300 px-4 py-2;
    }

    & th {
        @apply bg-gray-100 font-semibold;
    }

    /* Horizontal rules */
    & hr {
        @apply my-8 border-none border-t border-gray-300;
    }

    /* Images */
    & img {
        @apply max-w-full h-auto rounded-lg my-4;
    }

    /* Code blocks */
    & pre {
        @apply relative my-4 overflow-x-auto rounded-lg border border-gray-200 max-w-full bg-gray-50;
    }

    & pre code {
        @apply block text-sm font-mono p-4 bg-transparent;
    }

    /* Ensure hljs code blocks are visible */
    & pre.hljs {
        @apply p-0;
    }

    & pre.hljs code {
        @apply bg-transparent;
    }

    /* Inline code */
    & code:not(pre code) {
        @apply rounded px-1.5 py-0.5 text-sm font-mono bg-gray-200 text-gray-900;
    }

    /* Scrollbar styling for code blocks */
    & pre::-webkit-scrollbar {
        @apply h-2;
    }

    & pre::-webkit-scrollbar-track {
        @apply bg-gray-100 rounded;
    }

    & pre::-webkit-scrollbar-thumb {
        @apply bg-gray-400 rounded;
    }

    & pre::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-500;
    }
}

/* Dark mode overrides */
.dark {
    /* Override highlight.js theme to Atom One Dark in dark mode */
    & .hljs {
        background: #282c34;
        color: #abb2bf;
    }

    & .hljs-comment,
    & .hljs-quote {
        color: #5c6370;
        font-style: italic;
    }

    & .hljs-doctag,
    & .hljs-keyword,
    & .hljs-formula {
        color: #c678dd;
    }

    & .hljs-section,
    & .hljs-name,
    & .hljs-selector-tag,
    & .hljs-deletion,
    & .hljs-subst {
        color: #e06c75;
    }

    & .hljs-literal {
        color: #56b6c2;
    }

    & .hljs-string,
    & .hljs-regexp,
    & .hljs-addition,
    & .hljs-attribute,
    & .hljs-meta .hljs-string {
        color: #98c379;
    }

    & .hljs-attr,
    & .hljs-variable,
    & .hljs-template-variable,
    & .hljs-type,
    & .hljs-selector-class,
    & .hljs-selector-attr,
    & .hljs-selector-pseudo,
    & .hljs-number {
        color: #d19a66;
    }

    & .hljs-symbol,
    & .hljs-bullet,
    & .hljs-link,
    & .hljs-meta,
    & .hljs-selector-id,
    & .hljs-title {
        color: #61aeee;
    }

    & .hljs-built_in,
    & .hljs-title.class_,
    & .hljs-class .hljs-title {
        color: #e6c07b;
    }

    & .hljs-emphasis {
        font-style: italic;
    }

    & .hljs-strong {
        font-weight: bold;
    }

    & .hljs-link {
        text-decoration: underline;
    }

    /* Dark mode markdown elements */
    & .markdown-view {
        & pre {
            @apply bg-gray-800 border-gray-600;
        }

        & code:not(pre code) {
            @apply bg-gray-700 text-gray-200;
        }

        & blockquote {
            @apply border-gray-600 text-gray-400;
        }

        & th,
        & td {
            @apply border-gray-600;
        }

        & th {
            @apply bg-gray-800;
        }

        & hr {
            @apply border-gray-600;
        }

        & pre::-webkit-scrollbar-track {
            @apply bg-gray-800;
        }

        & pre::-webkit-scrollbar-thumb {
            @apply bg-gray-600;
        }

        & pre::-webkit-scrollbar-thumb:hover {
            @apply bg-gray-500;
        }
    }
}