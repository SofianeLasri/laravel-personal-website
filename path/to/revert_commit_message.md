Reverting commit fc307f10fae42f2757d8110f21be7f636764d251 (actual revert)

This commit reverts changes made in commit fc307f10fae42f2757d8110f21be7f636764d251. Please refer to previous commit history for details.